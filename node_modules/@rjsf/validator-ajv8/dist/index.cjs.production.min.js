"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("@rjsf/utils"),t=require("./createAjvInstance-0cd8cfba.js"),e=require("lodash/get"),a=require("lodash/isEqual");function i(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}require("ajv"),require("ajv-formats"),require("lodash/isObject");var o=i(e),s=i(a),n=["instancePath","keyword","params","schemaPath","parentSchema"];function c(e,a,i,s,c,l,h){var d=a.validationError,u=function(e,a){return void 0===e&&(e=[]),e.map((function(e){var i=e.instancePath,s=e.keyword,c=e.params,l=e.schemaPath,h=e.parentSchema,d=t._objectWithoutPropertiesLoose(e,n).message,u=void 0===d?"":d,v=i.replace(/\//g,"."),m=(v+" "+u).trim();if("missingProperty"in c){var f=c.missingProperty,p=r.getUiOptions(o.default(a,""+(v=v?v+"."+c.missingProperty:c.missingProperty).replace(/^\./,""))).title;if(p)u=u.replace(f,p);else{var E=o.default(h,[r.PROPERTIES_KEY,f,"title"]);E&&(u=u.replace(f,E))}m=u}else{var g=r.getUiOptions(o.default(a,""+v.replace(/^\./,""))).title;if(g)m=("'"+g+"' "+u).trim();else{var j=null==h?void 0:h.title;j&&(m=("'"+j+"' "+u).trim())}}return{name:s,property:v,message:u,params:c,stack:m,schemaPath:l}}))}(a.errors,h);d&&(u=[].concat(u,[{stack:d.message}])),"function"==typeof l&&(u=l(u,h));var v=r.toErrorSchema(u);if(d&&(v=t._extends({},v,{$schema:{__errors:[d.message]}})),"function"!=typeof c)return{errors:u,errorSchema:v};var m=r.getDefaultFormState(e,s,i,s,!0),f=c(m,r.createErrorHandler(m),h),p=r.unwrapErrorHandler(f);return r.validationDataMerge({errors:u,errorSchema:v},p)}var l=function(){function e(r,e){this.ajv=void 0,this.localizer=void 0,this.ajv=t.createAjvInstance(r.additionalMetaSchemas,r.customFormats,r.ajvOptionsOverrides,r.ajvFormatOptions,r.AjvClass),this.localizer=e}var a=e.prototype;return a.toErrorList=function(t,e){return void 0===e&&(e=[]),r.toErrorList(t,e)},a.rawValidation=function(t,e){var a,i,o=void 0;t[r.ID_KEY]&&(a=this.ajv.getSchema(t[r.ID_KEY]));try{void 0===a&&(a=this.ajv.compile(t)),a(e)}catch(r){o=r}return a&&("function"==typeof this.localizer&&this.localizer(a.errors),i=a.errors||void 0,a.errors=null),{errors:i,validationError:o}},a.validateFormData=function(r,t,e,a,i){return c(this,this.rawValidation(t,r),r,t,e,a,i)},a.isValid=function(t,e,a){var i,o=null!=(i=a[r.ID_KEY])?i:r.ROOT_SCHEMA_PREFIX;try{void 0===this.ajv.getSchema(o)&&this.ajv.addSchema(a,o);var s,n=r.withIdRefPrefix(t);return n[r.ID_KEY]&&(s=this.ajv.getSchema(n[r.ID_KEY])),void 0===s&&(s=this.ajv.compile(n)),s(e)}catch(r){return console.warn("Error encountered compiling schema:",r),!1}finally{this.ajv.removeSchema(o)}},e}();function h(r,t){return void 0===r&&(r={}),new l(r,t)}var d=function(){function t(r,t,e){this.rootSchema=void 0,this.validateFns=void 0,this.mainValidator=void 0,this.localizer=void 0,this.rootSchema=t,this.validateFns=r,this.localizer=e,this.mainValidator=this.getValidator(t)}var e=t.prototype;return e.getValidator=function(t){var e=o.default(t,r.ID_KEY)||r.hashForSchema(t),a=this.validateFns[e];if(!a)throw new Error('No precompiled validator function was found for the given schema for "'+e+'"');return a},e.toErrorList=function(t,e){return void 0===e&&(e=[]),r.toErrorList(t,e)},e.rawValidation=function(r,t){if(!s.default(r,this.rootSchema))throw new Error("The schema associated with the precompiled schema differs from the schema provided for validation");this.mainValidator(t),"function"==typeof this.localizer&&this.localizer(this.mainValidator.errors);var e=this.mainValidator.errors||void 0;return this.mainValidator.errors=null,{errors:e}},e.validateFormData=function(r,t,e,a,i){return c(this,this.rawValidation(t,r),r,t,e,a,i)},e.isValid=function(t,e,a){if(!s.default(a,this.rootSchema))throw new Error("The schema associated with the precompiled validator differs from the rootSchema provided for validation");return o.default(t,r.ID_KEY)!==r.JUNK_OPTION_ID&&this.getValidator(t)(e)},t}(),u=h();exports.createPrecompiledValidator=function(r,t,e){return new d(r,t,e)},exports.customizeValidator=h,exports.default=u;
//# sourceMappingURL=index.cjs.production.min.js.map
